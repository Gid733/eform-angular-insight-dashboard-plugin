<subheader-pn [title]="'Edit Dashboard' | translate">
  <div class="p-3">
    <button
      id="dashboardUpdateSaveBtn"
      class="btn btn-success"
      (click)="updateDashboard()">{{ 'Save' | translate }}
    </button>
    <button
      id="dashboardUpdateSaveCancelBtn"
      class="btn btn-accent text-black-50"
      [routerLink]="['../../../dashboards']">{{ 'Cancel' | translate }}
    </button>
  </div>
</subheader-pn>

<div class="container-fluid">
  <div class="card z-depth-3 mt-4" style="width: 100%">
    <div class="card-header">
      <div class="row">
        <div class="col">
          <div class="md-form">
            <input mdbInputDirective [mdbValidate]="false"
                   [(ngModel)]="dashboardEditModel.dashboardName"
                   type="text"
                   class="form-control input-sm" id="dashboardNameInput">
            <label for="dashboardNameInput">{{'Dashboard name' | translate}}</label>
          </div>
        </div>
      </div>
    </div>
    <div class="card-body">
      <button
        id="initialItemCreateBtn"
        class="btn btn-success mb-1 mt-1" *ngIf="dashboardEditModel.items.length === 0"
        (click)="onAddNewBlock(1)">{{ 'Add new item' | translate }}
      </button>
      <section dragula="ITEMS" id="dashboardItems"
               (dragulaModelChange)="dragulaPositionChanged($event)"
               [dragulaModel]="dashboardEditModel.items">
        <app-dashboard-item-edit *ngFor="let dashboardItem of dashboardEditModel.items"
                                 [dashboardItem]="dashboardItem"
                                 [locationsTags]="availableLocationsTags"
                                 [questions]="questions"
                                 id="dashboardItem"
                                 [surveyId]="dashboardEditModel.surveyId"
                                 (addNewItem)="onAddNewBlock($event)"
                                 (copyItem)="onCopyBlock($event)"
                                 (deleteItem)="onDeleteBlock($event)"
                                 [ngClass]="{'no-drag' : !dashboardItem.collapsed}"
                                 (dashboardItemChanged)="onDashboardItemChanged($event)"></app-dashboard-item-edit>
      </section>
    </div>
  </div>
</div>

<spinner-pn [spinnerVisibility]="spinnerStatus"></spinner-pn>
